<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arif Samet BAL - Rehab ve Fit</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React ve ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    
    <!-- Babel (JSX'i tarayıcıda çalıştırmak için) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Kaydırma çubuğunu gizlemek için */
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fade-in 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICON COMPONENTS (Lucide React Replacements for Browser) ---
        const IconBase = ({ children, className, ...props }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width="24" height="24" viewBox="0 0 24 24" 
                fill="none" stroke="currentColor" strokeWidth="2" 
                strokeLinecap="round" strokeLinejoin="round"
                className={className} 
                {...props}
            >
                {children}
            </svg>
        );

        const CheckCircle = (props) => <IconBase {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></IconBase>;
        const Activity = (props) => <IconBase {...props}><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></IconBase>;
        const BarChart2 = (props) => <IconBase {...props}><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></IconBase>;
        const AlertCircle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></IconBase>;
        const Save = (props) => <IconBase {...props}><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></IconBase>;
        const Trash2 = (props) => <IconBase {...props}><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></IconBase>;
        const Trophy = (props) => <IconBase {...props}><path d="M8 21h8m-4-9v9m-4.8-9a3 3 0 1 0 5.6 0"/><path d="M6 9h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v1a2 2 0 0 0 2 2z"/></IconBase>;
        const CalendarIcon = (props) => <IconBase {...props}><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></IconBase>;
        const ChevronLeft = (props) => <IconBase {...props}><polyline points="15 18 9 12 15 6"/></IconBase>;
        const ChevronRight = (props) => <IconBase {...props}><polyline points="9 18 15 12 9 6"/></IconBase>;
        const Cloud = (props) => <IconBase {...props}><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/></IconBase>;
        const Loader2 = (props) => <IconBase {...props}><line x1="12" y1="2" x2="12" y2="6"/><line x1="12" y1="18" x2="12" y2="22"/><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"/><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"/><line x1="2" y1="12" x2="6" y2="12"/><line x1="18" y1="12" x2="22" y2="12"/><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"/><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"/></IconBase>;

        // --- CONFIG & DATA ---
        const WEEKLY_PLAN = {
          Pazartesi: {
            focus: "Üst Vücut - Güç",
            desc: "Temel itiş ve çekiş gücü.",
            warmup: [
              { id: 'wu_1', name: 'Pillow Squeeze (Yastık Sıkıştırma)', sets: '3 Set x 15 Sn', important: true },
              { id: 'wu_2', name: 'Straight Leg Raise', sets: '3 Set x 15 Tekrar', important: true },
            ],
            main: [
              { id: 'm1_1', name: 'Pull-Up (Barfiks)', sets: '4 Set x Max' },
              { id: 'm1_2', name: 'Dumbbell Floor Press', sets: '4 Set x 12-15' },
              { id: 'm1_3', name: 'Dumbbell Row', sets: '4 Set x 12 (Her Kol)' },
              { id: 'm1_4', name: 'DB Shoulder Press (Oturarak)', sets: '3 Set x 12' },
              { id: 'm1_5', name: 'Dumbbell Shrugs', sets: '3 Set x 15' },
            ]
          },
          Salı: {
            focus: "Alt Vücut & Rehab",
            desc: "Statik güç ve VMO aktivasyonu.",
            warmup: [
              { id: 'wu_1', name: 'Pillow Squeeze', sets: '3 Set x 15 Sn', important: true },
              { id: 'wu_2', name: 'Straight Leg Raise', sets: '3 Set x 15 Tekrar', important: true },
            ],
            main: [
              { id: 'tu_1', name: 'Static Wall Sit', sets: '4 Set x 30-45 Sn' },
              { id: 'tu_2', name: 'Glute Bridge', sets: '4 Set x 15 Tekrar' },
              { id: 'tu_3', name: 'Dumbbell Calf Raise', sets: '4 Set x 20 Tekrar' },
              { id: 'tu_4', name: 'Lying Adductor Squeeze', sets: '4 Set x 15 Tekrar', important: true },
              { id: 'tu_5', name: 'Plank', sets: '3 Set x Max' },
            ]
          },
          Çarşamba: {
            focus: "Üst Vücut - Omuz & Kol",
            desc: "Görsel gelişim ve izolasyon.",
            warmup: [
              { id: 'wu_1', name: 'Pillow Squeeze', sets: '3 Set x 15 Sn', important: true },
              { id: 'wu_2', name: 'Straight Leg Raise', sets: '3 Set x 15 Tekrar', important: true },
            ],
            main: [
              { id: 'wed_1', name: 'Chin-Up (Ters Barfiks)', sets: '3 Set x Max' },
              { id: 'wed_2', name: 'DB Lateral Raise', sets: '4 Set x 15 Tekrar' },
              { id: 'wed_3', name: 'DB Bicep Curls', sets: '4 Set x 12 Tekrar' },
              { id: 'wed_4', name: 'DB Overhead Triceps Ext.', sets: '4 Set x 12 Tekrar' },
              { id: 'wed_5', name: 'Hammer Curls', sets: '3 Set x 12 Tekrar' },
            ]
          },
          Perşembe: {
            focus: "Alt Vücut - Arka Zincir",
            desc: "Dize yük bindirmeden güç.",
            warmup: [
              { id: 'wu_1', name: 'Pillow Squeeze', sets: '3 Set x 15 Sn', important: true },
              { id: 'wu_2', name: 'Straight Leg Raise', sets: '3 Set x 15 Tekrar', important: true },
            ],
            main: [
              { id: 'thu_1', name: 'DB Romanian Deadlift', sets: '4 Set x 12 Tekrar', warning: 'Bel düz, dize dikkat!' },
              { id: 'thu_2', name: 'Single Leg Glute Bridge', sets: '3 Set x 10 Tekrar' },
              { id: 'thu_3', name: 'Side Lying Leg Raise', sets: '3 Set x 20 Tekrar', important: true },
              { id: 'thu_4', name: 'Dead Bug (Core)', sets: '3 Set x 15 Tekrar' },
            ]
          },
          Cuma: {
            focus: "Kondisyon & Fullbody",
            desc: "Süpersetlerle nabız yükseltme.",
            warmup: [
              { id: 'wu_1', name: 'Pillow Squeeze', sets: '3 Set x 15 Sn', important: true },
              { id: 'wu_2', name: 'Straight Leg Raise', sets: '3 Set x 15 Tekrar', important: true },
            ],
            main: [
              { id: 'fri_1', name: 'Süperset 1: Şınav + Row', sets: '3 Tur' },
              { id: 'fri_2', name: 'Süperset 2: Front Raise + Curl', sets: '3 Tur' },
              { id: 'fri_3', name: 'Plank', sets: 'Maksimum Süre' },
            ]
          }
        };

        const DAYS = Object.keys(WEEKLY_PLAN);
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyQZnsRe5nANmxi3DOjLQfIPEamiJp_VCtFqetQPBbmQlgwFG4hsJHUF-EkgNeOxDAfbQ/exec";

        // --- Helper Functions ---
        const getDayName = (dateString) => {
            const date = new Date(dateString);
            const options = { weekday: 'long' };
            return date.toLocaleDateString('tr-TR', options);
        };

        const getTodayDateString = () => {
            return new Date().toISOString().split('T')[0];
        };

        // --- MAIN APP COMPONENT ---
        function RehabApp() {
            const [activeTab, setActiveTab] = useState('workout');
            const [selectedDate, setSelectedDate] = useState(getTodayDateString());
            const [selectedDay, setSelectedDay] = useState('Pazartesi');
            const [checkedItems, setCheckedItems] = useState({});
            const [history, setHistory] = useState([]);
            const [showConfetti, setShowConfetti] = useState(false);
            const [isSaving, setIsSaving] = useState(false);
            const [currentMonth, setCurrentMonth] = useState(new Date());

            // Load data
            useEffect(() => {
                const savedHistory = localStorage.getItem('workoutHistory');
                const savedChecks = localStorage.getItem('currentSessionChecks');
                const savedDate = localStorage.getItem('lastSelectedDate');
                
                if (savedHistory) setHistory(JSON.parse(savedHistory));
                if (savedChecks) setCheckedItems(JSON.parse(savedChecks));
                
                if (savedDate) {
                    setSelectedDate(savedDate);
                    syncDayWithDate(savedDate);
                } else {
                    syncDayWithDate(getTodayDateString());
                }
            }, []);

            useEffect(() => {
                localStorage.setItem('currentSessionChecks', JSON.stringify(checkedItems));
            }, [checkedItems]);

            useEffect(() => {
                localStorage.setItem('lastSelectedDate', selectedDate);
            }, [selectedDate]);

            const syncDayWithDate = (dateVal) => {
                const dayName = getDayName(dateVal);
                if (WEEKLY_PLAN[dayName]) {
                    setSelectedDay(dayName);
                } 
            };

            const handleDateChange = (e) => {
                const newDate = e.target.value;
                setSelectedDate(newDate);
                syncDayWithDate(newDate);
            };

            const toggleCheck = (id) => {
                setCheckedItems(prev => ({
                    ...prev,
                    [id]: !prev[id]
                }));
            };

            const calculateProgress = () => {
                if (!WEEKLY_PLAN[selectedDay]) return 0;
                
                const dayPlan = WEEKLY_PLAN[selectedDay];
                const totalItems = dayPlan.warmup.length + dayPlan.main.length;
                
                let checkedCount = 0;
                [...dayPlan.warmup, ...dayPlan.main].forEach(item => {
                    if (checkedItems[`${item.id}`]) checkedCount++;
                });

                return Math.round((checkedCount / totalItems) * 100);
            };

            const finishWorkout = async () => {
                const progress = calculateProgress();
                
                if (progress === 0) {
                    alert("Henüz hiçbir hareketi işaretlemedin!");
                    return;
                }

                setIsSaving(true);

                const newLog = {
                    dateString: selectedDate,
                    displayDate: new Date(selectedDate).toLocaleDateString('tr-TR'),
                    timestamp: new Date().getTime(),
                    day: selectedDay,
                    progress: progress,
                    focus: WEEKLY_PLAN[selectedDay] ? WEEKLY_PLAN[selectedDay].focus : "Özel Antrenman"
                };

                const newHistory = [newLog, ...history];
                setHistory(newHistory);
                localStorage.setItem('workoutHistory', JSON.stringify(newHistory));
                
                try {
                    await fetch(GOOGLE_SCRIPT_URL, {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(newLog)
                    });
                } catch (error) {
                    console.error("Google Sheets Hatası:", error);
                    alert("Yerel kayıt başarılı ama Google Sheets'e gönderilemedi.");
                }

                setCheckedItems({});
                setIsSaving(false);
                setShowConfetti(true);
                setTimeout(() => setShowConfetti(false), 3000);
                setActiveTab('stats');
            };

            const clearHistory = () => {
                if(confirm("Tüm geçmiş verilerin silinecek. Emin misin?")) {
                    setHistory([]);
                    localStorage.removeItem('workoutHistory');
                }
            };

            const renderCalendar = () => {
                const year = currentMonth.getFullYear();
                const month = currentMonth.getMonth();
                
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                
                let startDayIndex = firstDay.getDay(); 
                if (startDayIndex === 0) startDayIndex = 7; 
                
                const daysInMonth = lastDay.getDate();
                const days = [];

                for (let i = 1; i < startDayIndex; i++) {
                    days.push(<div key={`empty-${i}`} className="p-2"></div>);
                }

                for (let d = 1; d <= daysInMonth; d++) {
                    const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
                    const logsForDay = history.filter(h => h.dateString === dateStr);
                    const hasWorkout = logsForDay.length > 0;
                    const isComplete = logsForDay.some(h => h.progress === 100);

                    days.push(
                        <div key={d} className="aspect-square p-1 relative">
                            <div className={`w-full h-full rounded-lg flex items-center justify-center text-sm font-medium border
                                ${hasWorkout 
                                ? (isComplete ? 'bg-green-100 border-green-300 text-green-800' : 'bg-blue-100 border-blue-300 text-blue-800')
                                : 'bg-white border-slate-100 text-slate-400'}
                            `}>
                                {d}
                                {hasWorkout && (
                                    <div className={`absolute bottom-1 w-1.5 h-1.5 rounded-full ${isComplete ? 'bg-green-500' : 'bg-blue-500'}`}></div>
                                )}
                            </div>
                        </div>
                    );
                }
                return days;
            };

            const changeMonth = (delta) => {
                const newDate = new Date(currentMonth);
                newDate.setMonth(newDate.getMonth() + delta);
                setCurrentMonth(newDate);
            };

            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-800 pb-24">
                    {/* Header */}
                    <header className="bg-white shadow-sm sticky top-0 z-20">
                        <div className="max-w-md mx-auto px-4 py-3">
                            <div className="flex justify-between items-center mb-3">
                                <div>
                                    <h1 className="text-lg font-bold text-slate-900 leading-tight">
                                        Arif Samet BAL
                                        <span className="block text-blue-600 text-sm font-normal">Rehab ve Fit</span>
                                    </h1>
                                </div>
                                {activeTab === 'workout' && (
                                    <div className="text-right">
                                        <span className="text-2xl font-bold text-blue-600">%{calculateProgress()}</span>
                                    </div>
                                )}
                            </div>

                            {activeTab === 'workout' && (
                                <div className="bg-slate-100 p-2 rounded-lg flex items-center justify-between mb-2">
                                    <div className="flex items-center gap-2 w-full">
                                        <CalendarIcon className="w-5 h-5 text-slate-500" />
                                        <input 
                                            type="date" 
                                            value={selectedDate}
                                            onChange={handleDateChange}
                                            className="bg-transparent font-medium text-slate-700 w-full focus:outline-none"
                                        />
                                    </div>
                                    <div className="text-xs font-bold text-slate-400 uppercase whitespace-nowrap px-2">
                                        {getDayName(selectedDate)}
                                    </div>
                                </div>
                            )}
                            
                            {activeTab === 'workout' && (
                                <div className="overflow-x-auto whitespace-nowrap pb-1 hide-scrollbar -mx-4 px-4">
                                    <div className="flex space-x-2">
                                        {DAYS.map(day => (
                                            <button
                                                key={day}
                                                onClick={() => setSelectedDay(day)}
                                                className={`px-3 py-1.5 rounded-full text-xs font-bold transition-colors border ${
                                                    selectedDay === day 
                                                        ? 'bg-slate-800 text-white border-slate-800' 
                                                        : 'bg-white text-slate-500 border-slate-200 hover:bg-slate-50'
                                                }`}
                                            >
                                                {day}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            )}
                        </div>
                    </header>

                    {/* Main Content */}
                    <main className="max-w-md mx-auto p-4">
                        
                        {showConfetti && (
                            <div className="fixed top-32 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-full shadow-lg z-50 animate-bounce text-sm font-bold flex items-center gap-2">
                                <Cloud className="w-4 h-4" /> Kaydedildi!
                            </div>
                        )}

                        {activeTab === 'workout' ? (
                            <div className="space-y-6">
                                
                                {!WEEKLY_PLAN[selectedDay] ? (
                                    <div className="bg-amber-50 border border-amber-200 p-4 rounded-xl text-center">
                                        <p className="text-amber-800 font-medium">Bu gün için planlı bir antrenman yok (Dinlenme).</p>
                                        <p className="text-xs text-amber-600 mt-1">Antrenman yapmak istiyorsan yukarıdan bir gün seçebilirsin.</p>
                                    </div>
                                ) : (
                                    <React.Fragment>
                                        <div className="bg-blue-50 border border-blue-100 p-4 rounded-xl">
                                            <h2 className="text-lg font-bold text-blue-900">{WEEKLY_PLAN[selectedDay].focus}</h2>
                                            <p className="text-sm text-blue-700">{WEEKLY_PLAN[selectedDay].desc}</p>
                                        </div>

                                        <div className="flex items-start gap-3 bg-amber-50 border border-amber-200 p-3 rounded-lg text-sm text-amber-800">
                                            <AlertCircle className="w-5 h-5 flex-shrink-0 mt-0.5" />
                                            <p>Dizinde "batma" veya "keskin acı" hissedersen hareketi bırak.</p>
                                        </div>

                                        <div>
                                            <h3 className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">
                                                Zorunlu Isınma & Rehab
                                            </h3>
                                            <div className="space-y-3">
                                                {WEEKLY_PLAN[selectedDay].warmup.map((item) => {
                                                    const isChecked = checkedItems[item.id] || false;
                                                    return (
                                                        <div 
                                                            key={item.id}
                                                            onClick={() => toggleCheck(item.id)}
                                                            className={`p-4 rounded-xl border-2 transition-all cursor-pointer flex items-center gap-4 ${
                                                                isChecked 
                                                                ? 'bg-emerald-50 border-emerald-200 opacity-70' 
                                                                : 'bg-white border-amber-200 shadow-sm'
                                                            }`}
                                                        >
                                                            <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 ${
                                                                isChecked ? 'bg-emerald-500 border-emerald-500' : 'border-slate-300'
                                                            }`}>
                                                                {isChecked && <CheckCircle className="w-4 h-4 text-white" />}
                                                            </div>
                                                            <div>
                                                                <h4 className={`font-semibold text-sm ${isChecked ? 'text-emerald-800 line-through' : 'text-slate-800'}`}>
                                                                    {item.name}
                                                                </h4>
                                                                <p className="text-xs text-slate-500 mt-0.5">{item.sets}</p>
                                                                {item.important && <span className="text-[10px] bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full font-bold mt-1 inline-block">VMO İÇİN ŞART</span>}
                                                            </div>
                                                        </div>
                                                    );
                                                })}
                                            </div>
                                        </div>

                                        <div>
                                            <h3 className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3">
                                                Ana Antrenman
                                            </h3>
                                            <div className="space-y-3">
                                                {WEEKLY_PLAN[selectedDay].main.map((item) => {
                                                    const isChecked = checkedItems[item.id] || false;
                                                    return (
                                                        <div 
                                                            key={item.id}
                                                            onClick={() => toggleCheck(item.id)}
                                                            className={`p-4 rounded-xl border transition-all cursor-pointer flex items-center gap-4 ${
                                                                isChecked 
                                                                ? 'bg-slate-50 border-slate-200 opacity-60' 
                                                                : 'bg-white border-slate-200 shadow-sm'
                                                            }`}
                                                        >
                                                            <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 ${
                                                                isChecked ? 'bg-blue-500 border-blue-500' : 'border-slate-300'
                                                            }`}>
                                                                {isChecked && <CheckCircle className="w-4 h-4 text-white" />}
                                                            </div>
                                                            <div>
                                                                <h4 className={`font-semibold text-sm ${isChecked ? 'text-slate-500 line-through' : 'text-slate-800'}`}>
                                                                    {item.name}
                                                                </h4>
                                                                <p className="text-xs text-slate-500 mt-0.5">{item.sets}</p>
                                                                {item.warning && <p className="text-[10px] text-red-500 mt-1 font-bold">{item.warning}</p>}
                                                            </div>
                                                        </div>
                                                    );
                                                })}
                                            </div>
                                        </div>

                                        <div className="pt-4 pb-8">
                                            <button 
                                                onClick={finishWorkout}
                                                disabled={isSaving}
                                                className={`w-full text-white py-4 rounded-xl font-bold text-lg shadow-lg flex items-center justify-center gap-2 transition-all
                                                    ${isSaving ? 'bg-slate-400 cursor-not-allowed' : 'bg-slate-900 hover:bg-slate-800 active:scale-95'}
                                                `}
                                            >
                                                {isSaving ? (
                                                    <React.Fragment>
                                                        <Loader2 className="w-5 h-5 animate-spin" /> Kaydediliyor...
                                                    </React.Fragment>
                                                ) : (
                                                    <React.Fragment>
                                                        <Save className="w-5 h-5" /> 
                                                        {new Date(selectedDate).toLocaleDateString('tr-TR', { day: 'numeric', month: 'long' })} Kaydet
                                                    </React.Fragment>
                                                )}
                                            </button>
                                        </div>
                                    </React.Fragment>
                                )}
                            </div>
                        ) : (
                            <div className="space-y-6 animate-fade-in">
                                <div className="bg-white p-4 rounded-2xl shadow-sm border border-slate-100">
                                    <div className="flex items-center justify-between mb-4">
                                        <button onClick={() => changeMonth(-1)} className="p-2 hover:bg-slate-100 rounded-full"><ChevronLeft className="w-5 h-5 text-slate-600"/></button>
                                        <h2 className="font-bold text-slate-800">
                                            {currentMonth.toLocaleDateString('tr-TR', { month: 'long', year: 'numeric' })}
                                        </h2>
                                        <button onClick={() => changeMonth(1)} className="p-2 hover:bg-slate-100 rounded-full"><ChevronRight className="w-5 h-5 text-slate-600"/></button>
                                    </div>
                                    
                                    <div className="grid grid-cols-7 text-center mb-2">
                                        {['Pzt', 'Sal', 'Çar', 'Per', 'Cum', 'Cmt', 'Paz'].map(d => (
                                            <div key={d} className="text-xs font-bold text-slate-400">{d}</div>
                                        ))}
                                    </div>
                                    
                                    <div className="grid grid-cols-7 gap-1">
                                        {renderCalendar()}
                                    </div>
                                    
                                    <div className="flex gap-4 justify-center mt-4 text-xs text-slate-500">
                                        <div className="flex items-center gap-1"><div className="w-3 h-3 bg-green-500 rounded-full"></div> Tamamlandı</div>
                                        <div className="flex items-center gap-1"><div className="w-3 h-3 bg-blue-500 rounded-full"></div> Eksik</div>
                                    </div>
                                </div>

                                <div className="bg-slate-900 text-white p-6 rounded-2xl shadow-lg">
                                    <h2 className="text-lg font-bold mb-4">Genel İstatistik</h2>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="bg-white/10 p-3 rounded-lg backdrop-blur-sm">
                                            <span className="block text-3xl font-bold">{history.length}</span>
                                            <span className="text-xs text-slate-300">Toplam Antrenman</span>
                                        </div>
                                        <div className="bg-white/10 p-3 rounded-lg backdrop-blur-sm">
                                            <span className="block text-3xl font-bold">
                                                {history.length > 0 ? Math.round(history.reduce((acc, curr) => acc + curr.progress, 0) / history.length) : 0}%
                                            </span>
                                            <span className="text-xs text-slate-300">Ortalama Başarı</span>
                                        </div>
                                    </div>
                                </div>

                                <div>
                                    <div className="flex justify-between items-center mb-4">
                                        <h3 className="font-bold text-slate-800">Geçmiş Kayıtlar</h3>
                                        {history.length > 0 && (
                                            <button onClick={clearHistory} className="text-xs text-red-500 flex items-center gap-1">
                                                <Trash2 className="w-3 h-3" /> Temizle
                                            </button>
                                        )}
                                    </div>
                                    
                                    {history.length === 0 ? (
                                        <div className="text-center py-8 bg-white rounded-xl border border-slate-100">
                                            <Trophy className="w-10 h-10 text-slate-300 mx-auto mb-2" />
                                            <p className="text-sm text-slate-400">Kayıt bulunamadı.</p>
                                        </div>
                                    ) : (
                                        <div className="space-y-3">
                                            {history.map((log, idx) => (
                                                <div key={idx} className="bg-white p-4 rounded-xl border border-slate-100 shadow-sm flex justify-between items-center">
                                                    <div>
                                                        <p className="font-bold text-slate-800 text-sm">{log.displayDate}</p>
                                                        <p className="text-xs text-slate-500">{log.day} • {log.focus}</p>
                                                    </div>
                                                    <div className="text-right">
                                                        <span className={`font-bold text-lg ${log.progress === 100 ? 'text-green-600' : 'text-blue-600'}`}>
                                                            %{log.progress}
                                                        </span>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}
                    </main>

                    <nav className="fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 px-6 py-3 flex justify-around items-center z-20 max-w-md mx-auto">
                        <button 
                            onClick={() => setActiveTab('workout')}
                            className={`flex flex-col items-center gap-1 ${activeTab === 'workout' ? 'text-blue-600' : 'text-slate-400'}`}
                        >
                            <Activity className="w-6 h-6" />
                            <span className="text-[10px] font-bold">Program</span>
                        </button>
                        <button 
                            onClick={() => setActiveTab('stats')}
                            className={`flex flex-col items-center gap-1 ${activeTab === 'stats' ? 'text-blue-600' : 'text-slate-400'}`}
                        >
                            <BarChart2 className="w-6 h-6" />
                            <span className="text-[10px] font-bold">İstatistik</span>
                        </button>
                    </nav>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<RehabApp />);
    </script>
</body>
</html>
